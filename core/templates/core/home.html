{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container d-flex flex-column justify-content-center align-items-center" style="min-height: 80vh;">
    
    <div class="text-center mb-5">
        {% if user.company_profile.logo %}
            <img src="{{ user.company_profile.logo.url }}" alt="Logo Empresa" class="img-fluid mb-3" style="max-height: 180px;">
        {% else %}
            <div class="text-center mb-4">
    {% if request.user.current_company.logo %}
        <img src="{{ request.user.current_company.logo.url }}" alt="Logo de la Empresa" style="max-height: 120px; object-fit: contain;" class="shadow-sm p-2 bg-white rounded-3">
    {% else %}
        <div class="d-inline-flex justify-content-center align-items-center bg-light rounded-circle shadow-sm" style="width: 100px; height: 100px;">
            <i class="bi bi-building fs-1 text-secondary"></i>
        </div>
    {% endif %}
</div>

        <h1 class="display-4 fw-bold text-dark text-uppercase" style="letter-spacing: 1px;">
            {{ user.company_profile.name|default:"MI EMPRESA S.A." }}
        </h1>
        
        <p class="text-muted text-uppercase small mt-2" style="letter-spacing: 3px; font-weight: 600;">
            <i class="bi bi-shield-lock-fill me-1"></i> Sistema ERP Online v2.0
        </p>
    </div>

    <div class="card border-0 shadow-sm px-5 py-4 text-center" style="min-width: 350px; background: linear-gradient(to right, #ffffff, #f8f9fa);">
        <div class="mb-2">
            {% if user.is_superuser %}
                <span class="badge bg-danger mb-2">Administrador Global</span>
            {% else %}
                <span class="badge bg-primary mb-2">Usuario del Sistema</span>
            {% endif %}
        </div>
        
        <h5 class="text-muted small text-uppercase mb-1">Sesi√≥n iniciada como:</h5>
        
        <h2 class="fw-bold text-dark">
            {% if user.get_full_name %}
                {{ user.get_full_name|title }}
            {% else %}
                {{ user.username|title }} {% endif %}
        </h2>

        <div class="mt-3 pt-3 border-top">
            <span class="text-muted">
                <i class="bi bi-geo-alt-fill text-warning me-1"></i>
                {{ user.profile.branch.name|default:"Sede Central" }}
            </span>
        </div>
    </div>

    <div class="mt-5 text-muted small opacity-75">
        {% now "l, j \d\e F \d\e Y" %}
    </div>

</div>
{% endblock %}